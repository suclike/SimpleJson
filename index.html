<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>SimpleJson by Wrdlbrnft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">SimpleJson</h1>
      <h2 class="project-tagline">A simple and lightning fast JSON Parser for Android with barely any runtime overhead!</h2>
      <a href="https://github.com/Wrdlbrnft/SimpleJson" class="btn">View on GitHub</a>
      <a href="https://github.com/Wrdlbrnft/SimpleJson/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Wrdlbrnft/SimpleJson/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <ul>
<li>
<strong>No slow reflection, full performance</strong>: SimpleJson uses compile time annotation processing to generate performant and efficient implementations of models and parsers. No performance hit due to reflection at runtime.</li>
<li>
<strong>Most errors caught at compile time</strong>: SimpleJson will check for most common errors at compile time and give you useful and detailed error messages.</li>
<li>
<strong>Generates real debuggable code</strong>: You can view the model and parser implementations at any time and debug any error and behaviour. No more guessing what went wrong.</li>
<li>
<strong>Easy to use and quick to setup</strong>: Getting SimpleJson to work requires no setup and after adding only a few annotations on your models you are good to go.</li>
<li>
<strong>Works with ProGuard</strong>: With SimpleJson you don't need to mess around with ProGuard rules and worry about keeping the right classes. Every bit of your code can be obfuscated without worrying about a thing.</li>
<li>
<strong>Works with Retrofit2</strong>: SimpleJson automatically detects if Retrofit2 is used in your project and automatically sets everything up so that Retrofit2 can work with your entities seamlessly!</li>
</ul>

<h1>
<a id="how-to-add-it-to-your-project" class="anchor" href="#how-to-add-it-to-your-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to add it to your project</h1>

<p>If you are using the new Jack compiler all you have to add is these two dependencies:</p>

<div class="highlight highlight-source-groovy"><pre>compile <span class="pl-s"><span class="pl-pds">'</span>com.github.wrdlbrnft:simple-json:0.1.0.9<span class="pl-pds">'</span></span>
annotationProcessor <span class="pl-s"><span class="pl-pds">'</span>com.github.wrdlbrnft:simple-json-processor:0.1.0.9<span class="pl-pds">'</span></span></pre></div>

<p>If you are not using Jack you can use the android-apt Gradle plugin instead of using the <code>annotationProcessor</code> configuration 
to add the annotation processor of SimpleJson to your module. </p>

<h1>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basic Usage</h1>

<p>SimpleJson works exclusively with interfaces. It generates an implementation of those interface for you as well as a parser which translates it into json. 
To get started just annotate your interface with <code>@JsonEntity</code> and use <code>@FieldName</code> to tell SimpleJson how to map elements in the json to the getters.</p>

<div class="highlight highlight-source-java"><pre>@<span class="pl-smi">JsonEntity</span>
<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">ExampleModel</span> {

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)
  <span class="pl-k">long</span> <span class="pl-en">getId</span>();

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>)
  <span class="pl-smi">String</span> <span class="pl-en">getText</span>();
}</pre></div>

<p>A JSON that corrosponds to the above interface would look something like this:</p>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>some example text<span class="pl-pds">"</span></span>,
  <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-c1">27</span>
}</pre></div>

<p>For each interface a factory class is generated which can be used to turn json into your entities or the other way around. 
These factory classes are dynamically generated and are usually names by adding an s to the end of the interface name. If the interface name already ends with an s then the word Factory is appended.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">ExampleModel</span> model <span class="pl-k">=</span> <span class="pl-smi">ExampleModels</span><span class="pl-k">.</span>fromJson(json);</pre></div>

<p>If you have an array of json objects like this:</p>

<div class="highlight highlight-source-json"><pre>[
  {
    <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>qwerty<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-c1">27</span>
  },
  {
    <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>asdfdsa<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-c1">37</span>
  },
  {
    <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>hello world<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>: <span class="pl-c1">47</span>
  }
]</pre></div>

<p>Then you can parse that json by calling <code>fromJsonArray()</code>:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">List&lt;<span class="pl-smi">ExampleModel</span>&gt;</span> models <span class="pl-k">=</span> <span class="pl-smi">ExampleModels</span><span class="pl-k">.</span>fromJsonArray(json);</pre></div>

<p>Translating an entity into json from an entity or a <code>Collection</code> of entities works by calling <code>toJson()</code>:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">String</span> json <span class="pl-k">=</span> <span class="pl-smi">ExampleModels</span><span class="pl-k">.</span>toJson(model);
<span class="pl-c1">...</span>
<span class="pl-k">List&lt;<span class="pl-smi">ExampleModel</span>&gt;</span> models <span class="pl-k">=</span> <span class="pl-c1">...</span>;
<span class="pl-smi">String</span> jsonArray <span class="pl-k">=</span> <span class="pl-smi">SimpleJson</span><span class="pl-k">.</span>toJson(<span class="pl-smi">ExampleModel</span><span class="pl-k">.</span>class, models);</pre></div>

<p>Each factory class also has a <code>create()</code> method which can be used to create new instances of your entities without you having to implement them:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">ExampleModel</span> model <span class="pl-k">=</span> <span class="pl-smi">ExampleModels</span><span class="pl-k">.</span>create(<span class="pl-c1">27L</span>, <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>);</pre></div>

<h1>
<a id="optional-fields" class="anchor" href="#optional-fields" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Optional fields</h1>

<p>If there is an optional element in a JSON you want to parse just annotate the corrosponding getter with <code>@Optional</code>. If the element is missing from the json then it will be parsed as <code>null</code>. If an element is not annotated with <code>@Optional</code> and it is missing from the JSON than a <code>SimpleJsonException</code> will be thrown! </p>

<div class="highlight highlight-source-java"><pre>@<span class="pl-smi">JsonEntity</span>
<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">ExampleModel</span> {

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>id<span class="pl-pds">"</span></span>)
  <span class="pl-k">long</span> <span class="pl-en">getId</span>();

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>)
  <span class="pl-smi">String</span> <span class="pl-en">getText</span>();

  <span class="pl-k">@Optional</span>
  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>)
  <span class="pl-smi">String</span> <span class="pl-en">getOptionalValue</span>();
}</pre></div>

<p><strong>Note:</strong> Methods annotated with <code>@Optional</code> cannot return primitive values! Use boxed values instead.</p>

<h1>
<a id="mapping-enums" class="anchor" href="#mapping-enums" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mapping Enums</h1>

<p>SimpleJson can map Enums from and to JSON for you! To use an enum in SimpleJson just add the <code>@JsonEnum</code> annotation. You can then define the mappings of each value with the <code>@MapTo</code> annotation.
 You can also use <code>@MapDefault</code> to define default mapping values if no other mapping applies. If no default value is defined then a <code>SimpleJsonException</code> will be thrown.</p>

<div class="highlight highlight-source-java"><pre>@<span class="pl-smi">JsonEnum</span>
<span class="pl-k">public</span> <span class="pl-k">enum</span> <span class="pl-en">ExampleEnum</span> {

  <span class="pl-k">@MapTo</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>)
  <span class="pl-c1">VALUE_A</span>,

  <span class="pl-k">@MapTo</span>(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>)
  <span class="pl-c1">VALUE_B</span>,

  <span class="pl-k">@MapTo</span>(<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>)
  <span class="pl-c1">VALUE_C</span>
}</pre></div>

<p>By annotating the enum like above <code>VALUE_A</code> will be mapped to the String <code>"a"</code> in the JSON, <code>VALUE_B</code> will be mapped to <code>"b"</code> and so on. If you parse a JSON and the String <code>"c"</code> is encountered in an element which should be parsed as <code>ExampleEnum</code> then it will be mapped to <code>VALUE_C</code>, if <code>"b"</code> is encountered it will be mapped to <code>VALUE_B</code> and so on.</p>

<h1>
<a id="collections-and-child-entities" class="anchor" href="#collections-and-child-entities" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Collections and Child Entities</h1>

<p>You can also work with complex models and child entities! Consider some like this:</p>

<div class="highlight highlight-source-java"><pre>@<span class="pl-smi">JsonEntity</span>
<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">Parent</span> {

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>types<span class="pl-pds">"</span></span>)
  <span class="pl-k">List&lt;<span class="pl-smi">Type</span>&gt;</span> <span class="pl-en">getTypes</span>();

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span>)
  <span class="pl-k">Set&lt;<span class="pl-smi">Child</span>&gt;</span> <span class="pl-en">getChildren</span>();
}

@<span class="pl-smi">JsonEntity</span>
<span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">Child</span> {

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>)
  <span class="pl-smi">String</span> <span class="pl-en">getText</span>();

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>enabled<span class="pl-pds">"</span></span>)
  <span class="pl-k">boolean</span> <span class="pl-en">isEnabled</span>();

  <span class="pl-k">@FieldName</span>(<span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>)
  <span class="pl-k">double</span> <span class="pl-en">getValue</span>();
}

@<span class="pl-smi">JsonEnum</span>
<span class="pl-k">public</span> <span class="pl-k">enum</span> <span class="pl-en">Type</span> {
  <span class="pl-k">@MapTo</span>(<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>) <span class="pl-smi">A</span>,
  <span class="pl-k">@MapTo</span>(<span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>) <span class="pl-smi">B</span>,
  <span class="pl-k">@MapTo</span>(<span class="pl-s"><span class="pl-pds">"</span>c<span class="pl-pds">"</span></span>) <span class="pl-smi">C</span>
  <span class="pl-k">@MapDefault</span> <span class="pl-smi">D</span>
}</pre></div>

<p>Collections like <code>List</code> or <code>Set</code> are represented as array in JSON. Child entities will be parsed recursively and if a <code>Parent</code> entity is translated to JSON the result would look something like this:</p>

<div class="highlight highlight-source-json"><pre>{
  <span class="pl-s"><span class="pl-pds">"</span>types<span class="pl-pds">"</span></span>: [<span class="pl-s"><span class="pl-pds">"</span>a<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>b<span class="pl-pds">"</span></span>],
  <span class="pl-s"><span class="pl-pds">"</span>children<span class="pl-pds">"</span></span>: [
    {
      <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>some text<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>enabled<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
      <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-c1">23.7</span>
    },
    {
      <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>some other text<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>enabled<span class="pl-pds">"</span></span>: <span class="pl-c1">0</span>,
      <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-c1">0.0</span>
    },
    {
      <span class="pl-s"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>: <span class="pl-s"><span class="pl-pds">"</span>example<span class="pl-pds">"</span></span>,
      <span class="pl-s"><span class="pl-pds">"</span>enabled<span class="pl-pds">"</span></span>: <span class="pl-c1">1</span>,
      <span class="pl-s"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>: <span class="pl-c1">1234.5</span>
    }
  ]
}</pre></div>

<h1>
<a id="retrofit2" class="anchor" href="#retrofit2" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Retrofit2</h1>

<p>If you are using Retrofit2 to make your API calls then SimpleJson will automatically generate a 
<code>SimpleJsonConverterFactory</code> for you which enables Retrofit2 to seamlessly work with your SimpleJson entities.
You can add the <code>SimpleJsonConverterFactory</code> when you create your <code>Retrofit</code> instance like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Retrofit</span> retrofit <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Retrofit</span>.<span class="pl-smi">Builder</span>()
    .baseUrl(<span class="pl-s"><span class="pl-pds">"</span>https://your.backend.com<span class="pl-pds">"</span></span>)
    .addConverterFactory(<span class="pl-k">new</span> <span class="pl-smi">SimpleJsonConverterFactory</span>())
    .build();</pre></div>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Wrdlbrnft/SimpleJson">SimpleJson</a> is maintained by <a href="https://github.com/Wrdlbrnft">Wrdlbrnft</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
